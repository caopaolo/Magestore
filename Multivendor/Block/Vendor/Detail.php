<?php
namespace Magestore\Multivendor\Block\Vendor;


use Magestore\Multivendor\Block\Vendor;

class Detail extends Vendor
{   protected $_objectManager;
    public function __construct(
        \Magento\Framework\View\Element\Template\Context $context,
        \Magento\Store\Model\StoreManagerInterface $storeManager,
        \Magestore\Multivendor\Model\ResourceModel\Vendor\CollectionFactory $vendorCollectionFactory,
        \Magento\Framework\ObjectManagerInterface $objectManager,
        \Magestore\Multivendor\Helper\Config $configHelper,
        array $data)
    {
        $this->_objectManager = $objectManager;
        parent::__construct($context, $storeManager,$configHelper, $vendorCollectionFactory, $data);
    }

    public function getVendorDetail(){

        $vendorId = $this->getRequest()->getParam('id');

        $vendor_model = $this->_objectManager->create('Magestore\Multivendor\Model\Vendor')->load($vendorId);
        $data = $vendor_model->getData();
      
        $this->pageConfig->getTitle()->set('Vendor '. $data['name']);
        return $data;
    }
    public function getMediaUrl()
    {
        return parent::getMediaUrl(); // TODO: Change the autogenerated stub
    }
    protected function _prepareLayout()
    {
        if($this->_configHelper->getStoreConfig('multivendor/general/active') == 0){
            return '';
        }
        else{
            $this->pageConfig->getTitle()->set('Vendor '. $this->getVendorDetail()['name']);
            return parent::_prepareLayout();
        }
     

    }
}